<template>
  <div>
    <!-- <myMap></myMap> -->
    <div
      id="mian"
      ref="charts"
      style="height: 800px;width:1000px; "
    ></div>
    <!-- <van-cell is-link @click="showPopup">展示弹出层</van-cell> -->
    <van-popup
      v-model="show"
      closeable
      :overlay="false"
      position="bottom"
      round
      :style="{ height: '30%' }"
      
    >
    <van-row type="flex" justify="space-around" style="padding-top: 5rem;">
      <van-col span="8">
        <van-image
          width="10rem"
           height="10rem"
           fit="cover"
           src="https://img01.yzcdn.cn/vant/cat.jpeg"
/>
      </van-col>
      <van-col span="8" type="flex" justify="space-around">
        <van-row >{{this.num}}</van-row>
        <van-row>123123321</van-row>
        <van-row>
          <van-button icon="guide-o" type="info" round @click="this.startRequest">出发</van-button>
          <van-button icon="guide-o" type="info" round @click="this.clearAll">结束</van-button>
        </van-row>
      </van-col>
    </van-row>

  </van-popup >


  </div>
</template>

<script>
import myMap from "@/components/map2";

import * as echarts from "echarts";
import $ from "jquery";
import zmap from "@/assets/svg/test.svg";
import { getRoute,reqCarStatusInfoList } from "@/api/site";
// import func from 'vue-editor-bridge';
let that;
export default {
  name: "Record",
  components: {
    myMap,
  },

  data() {
    return {
      //轮询数据1：
      num:0,
      //轮询定时器
      timer:null,
      //弹出框1
      show: false,
      svg: "",
      myChart: "",
      option: {},
      //点击的目的地数据
      destinationData: [],
      //车辆停靠的地点
      carPositionData:[],

      //点击目的地以后获取的内容：
      //返回的规划的路径
      routeData: [],
      //返回的车辆图片
      carImg:'',
      //返回的预计到达时间
      time:'',


      initOption: {
        title: {
          text: "Visit Route",
          left: "center",
          bottom: 10,
        },
        tooltip: {},
        geo: {
          map: "MacOdrum-LV5-floorplan-web",
          roam: true,
          selectedMode: true,
          zoom: 1.2,
          scaleLimit: {
            //所属组件的z分层，z值小的图形会被z值大的图形覆盖
            min: 0.5, //最小的缩放值
            max: 2, //最大的缩放值
          },
          left: -25, //组件离容器左侧的距离,百分比字符串或整型数字
          top: 47, //组件离容器上侧的距离，百分比字符串或整型数字
          right: "auto", //组件离容器右侧的距离,百分比字符串或整型数字
          bottom: "auto", //组件离容器下侧的距离,百分比字符串或整型数字
          layoutCenter: ["10%", "10%"],
          emphasis: {
            itemStyle: {
              color: undefined,
            },
            label: {
              show: true,
            },
          },
        },

        series: [
          //初始化所有路径
          {
            name: "目的地",
            type: "lines",
            coordinateSystem: "geo",
            geoIndex: 0,
            emphasis: {
              label: {
                show: false,
              },
            },
            polyline: true,
            lineStyle: {
              color: "#E6941A",
              width: 4,
              opacity: 1,
              type: "dotted",
            },
            /*             effect: {
                show: true,
                period: 8,
                color: "#bfc",
                constantSpeed: 80,
                trailLength: 1,
                loop: false,
                symbolSize: [20, 30],
                symbol:
                  "path://" +
                  "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
              }, */
            data: [
              {
                coords: [
                  [348.96, 1005.889],
                  [349.0016, 1001.209],
                  [349.0432, 996.529],
                  [349.0848, 991.849],
                  [349.4592, 987.403],
                  [349.8752, 982.996],
                  [350.7072, 978.55],
                  [351.7056, 974.143],
                  [353.2448, 970.906],
                  [355.6576, 966.577],
                  [358.4032, 963.106],
                  [359.9424, 960.961],
                  [363.312, 958.27],
                  [367.264, 956.32],
                  [371.1328, 955.111],
                  [375.168, 954.526],
                  [379.2448, 953.941],
                  [382.7808, 954.019],
                  [386.3584, 954.058],
                  [389.936, 954.136],
                  [393.472, 954.214],
                  [397.0496, 954.292],
                  [400.6272, 954.331],
                  [404.1632, 954.409],
                  [407.7408, 954.331],
                  [411.3184, 954.253],
                  [414.8544, 954.175],
                  [418.432, 954.097],
                  [421.968, 954.019],
                  [425.5456, 953.941],
                  [429.1232, 953.863],
                  [432.6592, 953.785],
                  [436.2368, 953.707],
                  [439.8144, 953.629],
                  [443.1424, 953.707],
                  [446.928, 953.785],
                  [450.7136, 953.824],
                  [454.4992, 953.902],
                  [458.3264, 953.98],
                  [462.112, 954.058],
                  [465.8976, 954.097],
                  [469.6832, 954.175],
                  [473.4688, 954.253],
                  [477.296, 954.292],
                  [481.0816, 954.37],
                  [484.8672, 954.448],
                  [488.6528, 954.526],
                  [492.48, 954.565],
                  [496.2656, 954.643],
                  [500.0512, 954.721],
                  [503.8368, 954.76],
                  [507.6224, 954.838],
                  [511.4496, 954.916],
                  [515.2352, 954.994],
                  [519.0208, 955.033],
                  [522.8064, 955.111],
                  [526.592, 955.189],
                  [530.4192, 955.267],
                  [534.2048, 955.306],
                  [537.9904, 955.228],
                  [541.776, 955.15],
                  [545.5616, 955.072],
                  [549.3888, 954.994],
                  [553.1744, 954.877],
                  [556.96, 954.799],
                  [560.7456, 954.721],
                  [564.5728, 954.643],
                  [568.3584, 954.565],
                  [572.144, 954.487],
                  [575.9296, 954.37],
                  [579.7152, 954.292],
                  [583.5424, 954.214],
                  [587.328, 954.136],
                  [591.1136, 954.058],
                  [594.8992, 953.941],
                  [598.6848, 953.863],
                  [602.4288, 953.551],
                  [606.1312, 953.239],
                  [609.8336, 953.005],
                  [613.536, 952.771],
                  [617.28, 952.537],
                  [620.9824, 952.303],
                  [624.6848, 952.069],
                  [628.3872, 952.03],
                  [632.1312, 952.03],
                  [635.8336, 952.03],
                  [639.536, 952.03],
                  [643.2384, 952.03],
                  [646.9824, 951.991],
                  [650.6848, 951.991],
                  [654.3872, 951.991],
                  [658.0896, 951.991],
                  [661.8336, 951.991],
                  [665.536, 951.952],
                  [669.2384, 951.952],
                  [672.9408, 951.952],
                  [676.6432, 951.952],
                  [680.3872, 951.952],
                  [684.0896, 951.913],
                  [687.7088, 951.523],
                  [691.2032, 950.587],
                  [694.3232, 949.144],
                  [697.4848, 947.311],
                  [700.4384, 944.971],
                  [702.6016, 942.592],
                  [704.432, 939.745],
                  [706.096, 936.586],
                  [707.2608, 933.193],
                  [708.384, 929.527],
                  [709.4656, 925.822],
                  [710.5472, 922.156],
                  [711.6288, 918.451],
                  [712.336, 914.746],
                  [713.0016, 910.924],
                  [713.4592, 906.673],
                  [713.584, 902.461],
                  [714, 898.249],
                  [714.4576, 893.998],
                  [714.7072, 889.786],
                  [714.7488, 885.613],
                  [714.7904, 881.479],
                  [714.7904, 877.345],
                  [714.832, 873.172],
                  [714.8736, 869.038],
                  [714.9152, 864.865],
                  [714.9152, 860.731],
                  [714.9568, 856.558],
                  [714.9984, 852.424],
                  [714.9984, 848.251],
                  [715.04, 844.117],
                  [715.0816, 839.983],
                  [715.1232, 835.81],
                  [715.1232, 831.676],
                  [715.5808, 827.503],
                  [716.2464, 823.525],
                  [717.8272, 819.976],
                  [719.7408, 816.427],
                  [721.9872, 813.073],
                  [724.7744, 810.226],
                  [727.6864, 808.003],
                  [730.9728, 805.858],
                  [734.4256, 804.532],
                  [738.1696, 803.44],
                  [741.7472, 802.855],
                  [745.3664, 802.66],
                  [748.6112, 802.543],
                  [751.9808, 802.582],
                  [755.1424, 802.66],
                  [758.4288, 802.582],
                  [761.8816, 802.621],
                  [764.6688, 802.504],
                  [767.456, 802.387],
                  [770.3264, 802.543],
                  [773.1136, 802.543],
                  [775.9424, 802.66],
                  [778.6048, 802.66],
                  [781.5168, 802.738],
                  [784.0544, 802.855],
                  [786.6336, 803.206],
                  [789.504, 803.245],
                  [791.8752, 803.323],
                  [794.912, 803.44],
                  [797.9904, 803.479],
                  [800.6528, 803.674],
                  [803.024, 803.752],
                  [805.6864, 803.947],
                  [808.848, 804.025],
                  [811.4272, 804.181],
                  [814.256, 804.259],
                  [817.0848, 804.337],
                  [819.9136, 804.454],
                  [822.7424, 804.532],
                  [825.5712, 804.61],
                  [828.4, 804.688],
                  [831.2288, 804.766],
                  [834.0576, 804.844],
                  [836.8864, 804.961],
                  [839.7152, 805.039],
                  [842.544, 805.117],
                  [845.3728, 805.195],
                  [848.2016, 805.273],
                  [851.0304, 805.39],
                  [853.9424, 805.078],
                  [856.7712, 804.571],
                  [859.4336, 803.83],
                  [862.096, 803.089],
                  [864.7584, 802.348],
                  [867.4208, 801.607],
                  [870.1248, 800.71],
                  [872.8704, 799.774],
                  [875.616, 798.643],
                  [878.3616, 797.551],
                  [881.1072, 796.42],
                  [883.8528, 795.289],
                  [886.5984, 794.197],
                  [889.344, 793.066],
                  [892.0896, 791.662],
                  [894.8352, 790.492],
                  [897.5808, 789.283],
                  [900.3264, 788.113],
                  [903.072, 786.904],
                  [905.8176, 785.734],
                  [908.5632, 784.525],
                  [911.3088, 783.355],
                  [914.0544, 782.146],
                  [916.8416, 780.976],
                  [919.5872, 779.767],
                  [922.416, 778.753],
                  [925.0784, 777.7],
                  [927.7408, 776.647],
                  [930.4032, 775.633],
                  [933.0656, 774.58],
                  [935.728, 773.527],
                  [938.3904, 772.513],
                  [941.0944, 771.46],
                  [943.7568, 770.446],
                  [946.4192, 769.393],
                  [949.0816, 768.418],
                  [951.744, 767.482],
                  [954.4064, 766.585],
                  [957.0688, 765.532],
                  [959.9392, 764.674],
                  [962.4352, 763.465],
                  [965.0976, 762.841],
                  [968.2592, 761.632],
                  [971.4624, 760.735],
                  [974.9152, 759.643],
                  [978.3264, 758.512],
                  [981.7792, 757.381],
                  [985.3152, 756.445],
                  [988.8512, 755.47],
                  [992.3872, 754.495],
                  [995.8816, 753.559],
                  [999.4176, 752.584],
                  [1002.9536, 751.648],
                  [1006.4896, 750.673],
                  [1009.776, 749.737],
                  [1012.7712, 748.762],
                  [1015.7664, 747.553],
                  [1018.8032, 746.383],
                  [1022.048, 745.33],
                  [1025.0016, 744.121],
                  [1027.9968, 743.068],
                  [1031.0336, 742.054],
                  [1034.0288, 741.001],
                  [1037.024, 739.987],
                  [1040.0608, 738.934],
                  [1043.056, 737.881],
                  [1046.0928, 736.711],
                  [1049.088, 735.502],
                  [1052.1248, 734.293],
                  [1055.3696, 733.084],
                  [1058.656, 731.875],
                  [1061.9008, 730.705],
                  [1065.1872, 729.496],
                  [1068.4736, 728.287],
                  [1071.8016, 727.156],
                  [1075.1712, 726.025],
                  [1078.4992, 724.933],
                  [1081.8688, 723.802],
                  [1085.1968, 722.905],
                  [1088.4832, 721.93],
                  [1091.7696, 720.955],
                  [1095.0144, 719.98],
                  [1098.3008, 718.966],
                  [1101.5456, 717.991],
                  [1104.832, 716.782],
                  [1108.1184, 715.378],
                  [1111.1968, 713.896],
                  [1114.2752, 712.414],
                  [1117.1872, 710.62],
                  [1120.0992, 708.787],
                  [1123.0112, 706.954],
                  [1125.9232, 705.16],
                  [1128.8352, 703.327],
                  [1131.7472, 701.533],
                  [1134.6592, 699.7],
                  [1137.488, 697.789],
                  [1140.3168, 695.917],
                  [1143.1456, 694.006],
                  [1145.9328, 692.095],
                  [1148.7616, 690.067],
                  [1151.424, 687.844],
                  [1154.128, 685.66],
                  [1156.7904, 683.476],
                  [1159.4528, 681.292],
                  [1162.1152, 679.108],
                  [1164.7776, 676.924],
                  [1167.44, 674.701],
                  [1170.1024, 672.517],
                  [1172.4736, 670.099],
                  [1174.8448, 667.72],
                  [1177.1744, 665.302],
                  [1179.5456, 662.884],
                  [1181.9168, 660.778],
                  [1184.2464, 658.672],
                  [1186.6176, 656.761],
                  [1188.9888, 654.85],
                  [1191.568, 653.017],
                  [1194.3968, 651.418],
                  [1197.1424, 650.014],
                  [1199.888, 648.649],
                  [1202.6336, 647.245],
                  [1205.3792, 645.88],
                  [1208.1248, 644.476],
                  [1210.912, 643.111],
                  [1213.7824, 641.941],
                  [1216.5696, 640.693],
                  [1219.3984, 639.25],
                  [1222.0192, 637.963],
                  [1224.64, 636.715],
                  [1227.6352, 635.116],
                  [1230.1312, 633.868],
                  [1233.0016, 632.347],
                  [1236.08, 631.099],
                  [1238.784, 629.695],
                  [1241.5712, 628.33],
                  [1244.4, 626.926],
                  [1247.2288, 625.561],
                  [1250.016, 624.157],
                  [1252.8448, 622.753],
                  [1255.6736, 621.388],
                  [1258.544, 620.413],
                  [1261.5808, 619.789],
                  [1264.7424, 619.633],
                  [1267.9456, 619.594],
                  [1271.1072, 619.594],
                  [1274.3104, 619.516],
                  [1277.472, 619.399],
                  [1280.6336, 619.321],
                  [1283.8368, 619.243],
                  [1286.9984, 619.165],
                  [1290.2016, 619.087],
                  [1293.3632, 619.009],
                  [1296.5664, 618.892],
                  [1299.728, 618.814],
                  [1302.4736, 618.931],
                  [1306.0928, 618.853],
                  [1309.8368, 618.97],
                  [1313.6224, 619.087],
                  [1317.3664, 619.204],
                  [1321.152, 619.36],
                  [1324.896, 619.477],
                  [1328.6816, 619.594],
                  [1332.4256, 619.711],
                  [1336.2112, 619.828],
                  [1339.9552, 619.945],
                  [1343.7408, 620.062],
                  [1347.4848, 620.179],
                  [1351.2704, 620.296],
                  [1355.0144, 620.413],
                  [1358.8, 620.569],
                  [1362.544, 620.686],
                  [1366.3296, 620.803],
                  [1369.9488, 620.608],
                  [1373.6096, 620.14],
                  [1377.2704, 619.321],
                  [1380.9312, 618.541],
                  [1384.384, 617.059],
                  [1387.8368, 615.382],
                  [1391.248, 613.159],
                  [1394.368, 610.273],
                  [1396.9472, 607.27],
                  [1398.9024, 604.15],
                  [1400.608, 600.757],
                  [1401.8976, 597.325],
                  [1402.8544, 593.932],
                  [1403.3952, 590.539],
                  [1403.8528, 587.107],
                  [1404.2688, 583.714],
                  [1404.6848, 580.282],
                  [1405.1424, 576.889],
                  [1405.5584, 573.496],
                  [1405.9744, 570.064],
                  [1406.432, 566.671],
                  [1406.848, 563.239],
                  [1407.264, 559.846],
                  [1407.7216, 556.453],
                  [1408.1376, 553.021],
                  [1408.5536, 549.628],
                  [1409.0112, 546.235],
                  [1409.4272, 542.803],
                  [1409.8848, 539.41],
                  [1409.8016, 535.861],
                  [1410.0928, 532.585],
                  [1410.3424, 529.309],
                  [1410.6336, 526.072],
                  [1410.8832, 522.796],
                  [1411.1744, 519.559],
                  [1411.4656, 516.283],
                  [1411.7152, 513.046],
                  [1412.0064, 509.77],
                  [1411.7984, 506.065],
                  [1411.9232, 503.335],
                  [1411.9648, 499.903],
                  [1412.0064, 496.666],
                  [1411.9232, 493.312],
                  [1411.9648, 489.763],
                  [1412.0064, 486.448],
                  [1412.0064, 483.133],
                  [1412.048, 479.818],
                  [1411.84, 476.503],
                  [1411.5904, 473.188],
                  [1411.3824, 469.873],
                  [1411.1328, 466.558],
                  [1410.9248, 463.243],
                  [1410.6752, 459.928],
                  [1410.4672, 456.613],
                  [1410.0512, 453.103],
                  [1409.3856, 449.632],
                  [1408.3872, 446.161],
                  [1406.9728, 442.846],
                  [1404.8928, 439.882],
                  [1402.6048, 437.542],
                  [1400.2336, 435.28],
                  [1397.2384, 434.11],
                  [1394.6176, 432.823],
                  [1391.456, 432.199],
                  [1388.752, 431.302],
                  [1385.7568, 430.639],
                  [1382.9696, 429.898],
                  [1380.1824, 429.391],
                  [1377.3536, 429.118],
                  [1374.5664, 428.884],
                  [1371.7792, 428.611],
                  [1368.992, 428.338],
                  [1366.08, 428.182],
                  [1363.2096, 427.987],
                  [1360.5056, 427.909],
                  [1357.8016, 427.831],
                  [1355.0976, 427.714],
                  [1352.352, 427.636],
                  [1349.648, 427.558],
                  [1346.944, 427.441],
                  [1344.24, 427.363],
                  [1341.536, 427.285],
                  [1338.832, 427.207],
                  [1336.128, 427.09],
                  [1333.424, 427.012],
                  [1330.72, 426.934],
                  [1328.016, 426.817],
                  [1325.312, 426.739],
                  [1322.608, 426.661],
                  [1319.904, 426.583],
                  [1317.2, 426.466],
                  [1314.496, 426.388],
                  [1311.7504, 426.31],
                  [1309.0464, 426.193],
                  [1306.3424, 426.115],
                  [1303.6384, 426.037],
                  [1300.9344, 425.92],
                  [1298.2304, 425.842],
                  [1295.5264, 425.764],
                  [1292.8224, 425.686],
                  [1290.1184, 425.569],
                  [1287.4144, 425.491],
                  [1284.7104, 425.413],
                  [1282.0064, 425.296],
                  [1279.3024, 425.218],
                  [1276.4736, 425.608],
                  [1273.6864, 426.427],
                  [1270.7328, 427.714],
                  [1267.8208, 429.664],
                  [1264.9088, 432.238],
                  [1261.9968, 435.085],
                  [1260.0416, 438.946],
                  [1258.4608, 443.08],
                  [1257.6704, 447.331],
                  [1257.3792, 451.66],
                  [1257.0464, 455.989],
                  [1256.7552, 460.318],
                  [1256.464, 464.647],
                  [1256.1728, 468.976],
                  [1255.8816, 473.305],
                  [1255.5904, 477.634],
                  [1255.2992, 481.963],
                  [1255.008, 486.292],
                  [1254.6752, 490.621],
                  [1254.384, 494.989],
                  [1254.0928, 499.318],
                  [1253.8016, 503.647],
                  [1253.5104, 507.976],
                  [1253.2192, 512.305],
                  [1252.928, 516.634],
                  [1252.6368, 520.963],
                  [1252.3456, 525.292],
                  [1252.0128, 529.621],
                  [1251.7216, 533.95],
                  [1251.4304, 538.279],
                  [1251.1392, 542.647],
                  [1250.848, 546.976],
                  [1250.5568, 551.305],
                  [1250.2656, 555.634],
                  [1249.9744, 559.963],
                  [1249.6832, 564.292],
                  [1249.3504, 568.621],
                  [1249.0592, 572.95],
                  [1248.768, 577.279],
                  [1248.4768, 581.608],
                  [1248.1856, 585.937],
                  [1247.8944, 590.305],
                  [1247.6032, 594.634],
                  [1247.52, 598.963],
                  [1247.4368, 603.292],
                  [1247.104, 607.816],
                  [1246.1056, 612.262],
                  [1243.9008, 615.967],
                  [1240.9888, 619.048],
                  [1237.4528, 621.31],
                  [1234.1248, 623.377],
                  [1230.464, 625.366],
                  [1225.8048, 627.121],
                  [1221.104, 629.032],
                  [1216.4448, 630.904],
                  [1211.7856, 632.776],
                  [1207.2096, 634.921],
                  [1202.6336, 637.066],
                  [1198.1824, 639.679],
                  [1193.6896, 642.331],
                  [1189.2384, 644.944],
                  [1184.7456, 647.557],
                  [1180.2944, 650.17],
                  [1175.8016, 652.783],
                  [1171.3504, 655.396],
                  [1166.8576, 658.009],
                  [1162.4064, 660.661],
                  [1158.2464, 663.274],
                  [1154.0864, 665.887],
                  [1150.4672, 669.124],
                  [1146.7232, 671.932],
                  [1143.1872, 675.442],
                  [1139.0272, 678.445],
                  [1134.784, 683.164],
                  [1130.4992, 687.883],
                  [1126.256, 692.563],
                  [1121.5552, 697.087],
                  [1116.9792, 699.505],
                  [1111.8624, 702.001],
                  [1107.1616, 704.185],
                  [1102.3776, 705.901],
                  [1097.5936, 707.773],
                  [1092.768, 709.489],
                  [1087.984, 711.166],
                  [1082.992, 712.882],
                  [1077.9584, 714.559],
                  [1072.9248, 716.236],
                  [1067.808, 717.835],
                  [1062.6912, 719.434],
                  [1057.5744, 721.033],
                  [1052.6656, 722.71],
                  [1047.7568, 724.387],
                  [1042.848, 726.298],
                  [1037.9392, 728.209],
                  [1033.0304, 730.12],
                  [1028.1216, 731.992],
                  [1023.2128, 733.903],
                  [1018.1792, 735.697],
                  [1013.1872, 737.491],
                  [1007.9456, 739.285],
                  [1002.704, 740.884],
                  [997.4624, 742.483],
                  [992.0128, 743.965],
                  [986.5632, 745.447],
                  [981.1136, 746.929],
                  [975.6224, 748.645],
                  [970.1728, 750.283],
                  [964.7232, 751.882],
                  [959.2736, 753.481],
                  [953.824, 755.08],
                  [948.4992, 756.796],
                  [943.1744, 758.551],
                  [937.8496, 760.618],
                  [932.4832, 762.724],
                  [927.1584, 764.791],
                  [921.8336, 767.014],
                  [916.5088, 769.198],
                  [911.184, 771.421],
                  [905.7344, 773.488],
                  [900.2848, 775.594],
                  [894.8352, 777.661],
                  [889.344, 779.728],
                  [883.8944, 781.834],
                  [878.4448, 783.901],
                  [872.9952, 786.007],
                  [867.5456, 788.074],
                  [862.096, 790.18],
                  [856.6048, 792.247],
                  [851.5712, 793.846],
                  [846.2048, 794.743],
                  [841.0048, 795.523],
                  [835.68, 795.913],
                  [830.3552, 796.225],
                  [825.0304, 796.498],
                  [819.8304, 796.459],
                  [814.6304, 796.381],
                  [809.4304, 796.186],
                  [804.2304, 795.991],
                  [799.0304, 795.601],
                  [793.8304, 795.172],
                  [788.6304, 794.743],
                  [783.4304, 794.314],
                  [778.2304, 793.885],
                  [773.0304, 793.456],
                  [767.8304, 793.027],
                  [762.6304, 792.598],
                  [757.4304, 792.169],
                  [752.2304, 791.74],
                  [747.0304, 791.311],
                  [741.8304, 790.921],
                  [736.6304, 790.219],
                  [731.264, 789.01],
                  [726.8128, 787.528],
                  [721.3216, 783.979],
                  [718.576, 780.703],
                  [716.704, 776.959],
                  [715.456, 772.981],
                  [715.2896, 769.432],
                  [714.7488, 764.908],
                  [714.9152, 761.125],
                  [714.7904, 755.626],
                  [714.9568, 750.088],
                  [715.1232, 744.589],
                  [715.2896, 739.051],
                  [715.456, 733.552],
                  [715.6224, 728.014],
                  [715.7888, 722.515],
                  [715.9552, 717.016],
                  [716.1216, 711.478],
                  [716.288, 705.979],
                  [716.4544, 700.441],
                  [716.6208, 694.942],
                  [716.6208, 689.404],
                  [716.6208, 683.905],
                  [716.6208, 678.367],
                  [716.6208, 672.868],
                  [716.6208, 667.33],
                  [716.6208, 661.831],
                  [716.6624, 656.332],
                  [716.6624, 650.794],
                  [716.6624, 645.295],
                  [716.6624, 639.757],
                  [716.6624, 634.258],
                  [716.6624, 628.72],
                  [716.6624, 623.221],
                  [716.6624, 617.683],
                  [716.6624, 612.184],
                  [716.6624, 606.685],
                  [716.6624, 601.147],
                  [716.496, 595.96],
                  [716.3296, 590.734],
                  [715.8304, 585.547],
                  [714.6656, 580.321],
                  [713.5008, 575.134],
                  [712.336, 569.908],
                  [711.1712, 564.721],
                  [710.0064, 559.534],
                  [708.8416, 554.308],
                  [708.176, 551.695],
                  [707.5104, 549.121],
                  [706.8448, 546.508],
                  [706.0128, 544.051],
                  [704.3904, 541.906],
                  [702.9344, 538.396],
                  [701.4784, 534.925],
                  [700.0224, 531.415],
                  [698.5664, 527.944],
                  [696.944, 524.785],
                  [694.8224, 520.963],
                  [692.7424, 517.453],
                  [690.1632, 514.138],
                  [687.5424, 510.784],
                  [684.9216, 507.469],
                  [682.3424, 504.115],
                  [678.8896, 500.956],
                  [675.4784, 497.758],
                  [672.0672, 494.599],
                  [668.6144, 491.401],
                  [665.2032, 488.242],
                  [661.2512, 485.2],
                  [656.9248, 482.197],
                  [652.5984, 479.194],
                  [648.272, 476.152],
                  [643.2384, 473.305],
                  [638.5792, 470.302],
                  [633.92, 467.806],
                  [626.7648, 464.452],
                  [619.2352, 462.112],
                  [611.7056, 459.772],
                  [604.2176, 457.432],
                  [596.688, 455.092],
                  [589.2, 452.752],
                  [581.504, 450.919],
                  [573.808, 449.437],
                  [567.2352, 448.501],
                  [560.496, 448.072],
                  [553.7152, 447.682],
                  [546.976, 447.253],
                  [540.2368, 446.863],
                  [533.456, 446.434],
                  [526.7168, 446.044],
                  [519.9776, 445.615],
                  [513.2384, 445.225],
                  [506.4576, 444.796],
                  [499.7184, 444.757],
                  [492.9792, 444.718],
                  [486.1984, 444.679],
                  [479.4592, 444.64],
                  [472.72, 444.601],
                  [465.7728, 444.562],
                  [458.6176, 444.874],
                  [451.4624, 445.186],
                  [444.3488, 445.537],
                  [437.1936, 445.849],
                  [429.872, 445.81],
                  [422.5088, 445.771],
                  [415.1872, 445.732],
                  [407.824, 445.654],
                  [400.5024, 445.615],
                  [393.1808, 445.576],
                  [385.8176, 445.537],
                  [378.496, 445.849],
                  [372.1312, 447.487],
                  [366.3488, 449.983],
                  [362.1472, 454],
                  [358.9024, 458.914],
                  [356.656, 463.828],
                  [354.8256, 468.352],
                  [353.536, 472.915],
                  [352.288, 477.478],
                  [351.9968, 482.353],
                  [351.7056, 487.852],
                  [351.6224, 493.117],
                  [351.4976, 498.382],
                  [351.4144, 503.686],
                  [351.3312, 508.951],
                  [351.2064, 514.216],
                  [351.1232, 519.52],
                  [351.04, 524.785],
                  [350.9568, 530.089],
                  [350.832, 535.354],
                  [350.7488, 540.619],
                  [350.6656, 545.923],
                  [350.5824, 551.188],
                  [350.4576, 556.492],
                  [350.3744, 561.757],
                  [350.2912, 567.022],
                  [350.3744, 572.482],
                  [350.4992, 577.981],
                  [350.5824, 583.441],
                  [350.6656, 588.901],
                  [350.7904, 594.361],
                  [350.8736, 599.821],
                  [350.9984, 605.281],
                  [351.0816, 610.741],
                  [351.2064, 616.201],
                  [351.2896, 621.661],
                  [351.4144, 627.121],
                  [351.4976, 632.581],
                  [351.5808, 638.08],
                  [351.7056, 643.54],
                  [351.7888, 649],
                  [351.4976, 654.46],
                  [351.2064, 659.92],
                  [350.9152, 665.38],
                  [350.624, 670.84],
                  [350.3328, 676.3],
                  [350.0416, 681.76],
                  [350.1664, 687.22],
                  [350.0832, 692.68],
                  [349.9584, 698.179],
                  [349.8752, 703.639],
                  [350.1664, 708.943],
                  [350.208, 714.715],
                  [350.2496, 720.487],
                  [350.2912, 726.259],
                  [350.3328, 732.07],
                  [350.416, 737.842],
                  [350.4576, 743.614],
                  [350.4992, 749.425],
                  [350.5408, 755.197],
                  [350.5824, 760.969],
                  [350.6656, 766.741],
                  [350.7072, 772.552],
                  [350.7488, 778.324],
                  [350.7904, 784.096],
                  [350.832, 789.868],
                  [350.9152, 795.679],
                  [350.9568, 801.451],
                  [350.9984, 807.223],
                  [351.04, 813.034],
                  [351.0816, 818.806],
                  [351.1648, 824.578],
                  [351.2064, 830.35],
                  [351.248, 836.161],
                  [351.2896, 841.933],
                  [351.3312, 847.705],
                  [351.4144, 853.477],
                  [351.456, 859.288],
                  [351.4976, 865.06],
                  [351.5392, 870.832],
                  [351.5808, 876.643],
                  [351.664, 882.415],
                  [351.7056, 888.187],
                  [351.7472, 893.959],
                  [351.7888, 899.77],
                  [351.8304, 905.542],
                  [351.9136, 911.314],
                  [352.3296, 916.228],
                  [353.2864, 920.986],
                  [355.0336, 925.705],
                  [357.3216, 930.775],
                ],
              },
            ],
          },
          //初始化站点
/*           {
            type: "scatter",
            name: "终点",
            coordinateSystem: "geo",
            geoIndex: 0,
            symbolSize: [20, 30],
            symbol:
              "path://" +
              "M512 68.191078c-171.531702 0-310.666552 139.133827-310.666552 310.666552 0 232.999658 310.666552 576.951291 310.666552 576.951291s310.666552-343.951633 310.666552-576.951291C822.665529 207.324906 683.531702 68.191078 512 68.191078zM512 489.809605c-61.245899 0-110.951975-49.706075-110.951975-110.951975S450.754101 267.904633 512 267.904633 622.951975 317.611731 622.951975 378.857631 573.245899 489.809605 512 489.809605z",
            itemStyle: {
              color: "#2ab002",
            },
            encode: {
              tooltip: 2,
            },
            data: [
              // this.destinationData
              [375.168, 954.526],
              [484.8672, 954.448],
              [938.3904, 772.513],
            ],
          }, */
/*          {
        type: "scatter",
        name: "空闲车辆",
        coordinateSystem: "geo",
        geoIndex: 0,
        symbolSize: [20, 30],
        symbol:
        "path://" +
            "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
        itemStyle: {
          color: '#3300FF',
        },
        encode: {
          tooltip: 2,
        },
        data: [
        [386.3584, 954.058]
        ],
      }, */
        ],
      },
      destinationSeries: {
        type: "scatter",
        name: "终点",
        coordinateSystem: "geo",
        geoIndex: 0,
        symbolSize: [20, 30],
        symbol:
          "path://" +
          "M512 68.191078c-171.531702 0-310.666552 139.133827-310.666552 310.666552 0 232.999658 310.666552 576.951291 310.666552 576.951291s310.666552-343.951633 310.666552-576.951291C822.665529 207.324906 683.531702 68.191078 512 68.191078zM512 489.809605c-61.245899 0-110.951975-49.706075-110.951975-110.951975S450.754101 267.904633 512 267.904633 622.951975 317.611731 622.951975 378.857631 573.245899 489.809605 512 489.809605z",
        itemStyle: {
          color: "#2ab002",
        },
        encode: {
          tooltip: 2,
        },
        data: [[375.168, 954.526],
              [484.8672, 954.448],
              [938.3904, 772.513]],
      },
      carStatusSeries: {
        type: "scatter",
        name: "空闲车辆",
        coordinateSystem: "geo",
        geoIndex: 0,
        symbolSize: [20, 30],
        symbol:
        "path://" +
            "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
        itemStyle: {
          color: '#3300FF',
        },
        encode: {
          tooltip: 2,
        },
        data: [
          [646.9824, 951.991]
        ],
      },
      carSeries: {
        name: "Route",
        type: "lines",
        coordinateSystem: "geo",
        geoIndex: 0,
        emphasis: {
          label: {
            show: false,
          },
        },
        polyline: true,
        lineStyle: {
          color: "#E6941A",
          width: 0,
          opacity: 1,
          type: "dotted",
          show: false,
        },
        effect: {
          show: true,
          period: 8,
          color: "#3300FF",
          constantSpeed: 80,
          trailLength: 1,
          // loop:false,
          symbolSize: [20, 30],
          symbol:
            "path://" +
            "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
        },
        data: [
          {
            coords: [
              [348.96, 1005.889],
              [349.0016, 1001.209],
            ],
          },
        ],
      },
      trackSeries: {
        name: "Route",
        type: "lines",
        coordinateSystem: "geo",
        geoIndex: 0,
        emphasis: {
          label: {
            show: false,
          },
        },
        polyline: true,
        lineStyle: {
          color: "#E6941A",
          width: 0,
          opacity: 1,
          type: "dotted",
          show: false,
        },
        effect: {
          show: true,
          period: 8,
          color: "#3300FF",
          constantSpeed: 80,
          trailLength: 0,
          loop: false,
          symbolSize: [20, 30],
          symbol:
            "path://" +
            "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
        },
        data: [
          {
            coords: this.routeData,
          },
        ],
      },
      trackSeries2: {
        name: "Route",
        type: "lines",
        coordinateSystem: "geo",
        geoIndex: 0,
        emphasis: {
          label: {
            show: false,
          },
        },
        polyline: true,
        lineStyle: {
          color: "#E6941A",
          width: 0,
          opacity: 1,
          type: "dotted",
          show: false,
        },
        effect: {
          show: true,
          period: 8,
          color: "#bfc",
          constantSpeed: 80,
          trailLength: 1,
          loop: false,
          symbolSize: [5, 30],
          symbol:
            "path://" +
            "M512 0c153.173333 0 277.333333 124.16 277.333333 277.333333v136.106667h42.666667a34.56 34.56 0 1 1 0 69.12h-42.666667V832a192 192 0 0 1-192 192h-170.666666a192 192 0 0 1-192-192V482.56H192a34.56 34.56 0 0 1-3.136-68.970667L192 413.44h42.666667V277.333333c0-153.173333 124.16-277.333333 277.333333-277.333333z m213.354667 775.552C663.402667 797.824 590.293333 810.666667 512 810.666667c-78.293333 0-151.381333-12.842667-213.333333-35.093334V832a128 128 0 0 0 128 128h170.666666a128 128 0 0 0 128-128l0.021334-56.448zM512 405.333333c-46.912 0-92.309333 5.077333-134.186667 14.634667C395.669333 465.045333 405.333333 519.210667 405.333333 576c0 56.810667-9.642667 110.933333-27.541333 156.032C419.690667 741.589333 465.066667 746.666667 512 746.666667c46.912 0 92.309333-5.077333 134.186667-14.634667C628.330667 686.954667 618.666667 632.789333 618.666667 576c0-53.013333 8.384-103.722667 24.064-146.901333l3.477333-9.130667-12.672-2.730667A612.992 612.992 0 0 0 512 405.333333z m213.333333 0c-25.92 38.912-42.666667 100.885333-42.666666 170.666667s16.746667 131.754667 42.666666 170.666667V405.333333z m-426.666666 0l0.021333 341.290667C324.586667 707.690667 341.333333 645.76 341.333333 576c0-69.781333-16.746667-131.733333-42.666666-170.666667zM512 64c-117.824 0-213.333333 95.509333-213.333333 213.333333v99.114667C360.618667 354.176 433.706667 341.333333 512 341.333333s151.381333 12.842667 213.333333 35.093334V277.333333c0-117.824-95.509333-213.333333-213.333333-213.333333z m95.445333 76.608l2.986667 0.96 40.106667 14.592a34.56 34.56 0 0 1-20.650667 65.898667l-2.986667-0.96-40.106666-14.592a34.56 34.56 0 0 1 20.650666-65.898667z m-149.589333 21.610667a34.56 34.56 0 0 1-17.749333 43.093333l-2.901334 1.194667-40.106666 14.592a34.56 34.56 0 0 1-26.538667-63.744l2.901333-1.194667 40.106667-14.592a34.56 34.56 0 0 1 44.288 20.650667z",
        },
        data: [
          {
            coords: this.routeData,
          },
        ],
      },
      carColor: {
        blue: "#3300ff",
        red: "#ff0000",
        green: "#0d5c30",
      },
    };
  },

  created() {
    that = this;
    //获取车辆所有的数据
  },

  mounted() {
    //加载地图初始化路径和站点
    this.getMap();
    //加载目前的车辆位置
    this.getCarStatus();

    
  },

  methods: {
    //弹出框1
    showPopup() {
      this.show = true;
    },
    //初始化站点和路线
    getMap() {
      var chartDom = document.getElementById("main");
      if (this.myChart == "" || this.myChart == null) {
        this.myChart = echarts.init(this.$refs.charts);
      }
      /*       $.get(zmap, function (svg) {
        echarts.registerMap("MacOdrum-LV5-floorplan-web", { svg: svg });
        this.option = this.initOption
        this.myChart.setOption(this.option);
        // this.onclickEvent()
      }); */

      this.$axios.get(zmap).then(
        (response) => (
          (this.svg = response.data),
          echarts.registerMap("MacOdrum-LV5-floorplan-web", {
            svg: this.svg,
          }),
          (this.option = this.initOption),
          //显示站点
          this.option.series.push(this.destinationSeries), 
          this.myChart.setOption(this.option),
          this.onclickEvent()
        )
      );
    },
    //获取现在的所有车辆列表和状态信息，并且显示在地图上
    async getCarStatus() {
      if (this.myChart == "" || this.myChart == null) {
        this.myChart = echarts.init(this.$refs.charts);
      }
      let result = await reqCarStatusInfoList()
      if(result.code == 200){
        let carList = result.data
        for(let i = 0;i<carList.length;i++){
         this.carPositionData.push(carList[i].position) 
        }
      }
     
      this.carStatusSeries.data = this.carPositionData
      this.option.series.push(this.carStatusSeries)
      this.myChart.setOption(this.option)
    },

    //点击事件，点击路径上的点获取坐标
    onclickEvent() {
      this.myChart.on("click", function (params) {
        if(params.seriesName == "目的地"){

        }else if (params.seriesName == "终点") {
          // console.log(that.myChart.convertFromPixel('geo',[params.event.offsetX,params.event.offsetY]))
          that.destinationData = that.myChart.convertFromPixel("geo", [
            params.event.offsetX,
            params.event.offsetY,
          ]);
          //显示站点信息
          that.showPopup();
          //获取数据并出发
          // that.getRouteList(that.destinationData);
        }
      });
    },

    //向后台发送目的地指令，返回实时坐标串,推荐的车辆，起点终点，预计到达时间
    async getRouteList(destinationPoint) {
      let result = await getRoute(destinationPoint);
      if (result.code == 200) {
        this.routeData = result.data;
        // console.log(this.routeData)

        // this.option.series[2].data[0].coords = this.routeData;
        this.trackSeries.data[0].coords = this.routeData;
        // this.trackSeries2.data[0].coords = this.routeData;
        this.option.series.push(this.trackSeries);
        // this.option.series.push(this.trackSeries2)
        // this.myChart.clear()

        this.myChart.setOption(this.option);


      }
    },

    //获取数据请求
    getList(){
      console.log('请求已进行'+ this.num++ +'次')
    },
    //清除定时器
    clearAll(){
      window.clearInterval(this.timer)
      this.timer = null
      console.log('销毁')
    },
    startRequest(){
      this.timer = window.setInterval(()=>{
        setTimeout(() => {
          this.getList()
        }, 0);
      },3000)
 
    },

  },
  destroyed(){

  }
};
</script>

<style lang="scss" scoped>
</style>